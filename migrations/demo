-- Dữ liệu Page và Folder Mapping (Quan trọng nhất)
CREATE TABLE IF NOT EXISTS pages (
    id SERIAL PRIMARY KEY,
    page_id VARCHAR(50) UNIQUE NOT NULL,
    page_name VARCHAR(255),
    drive_folder_id VARCHAR(100) NOT NULL, -- Folder chứa ảnh/video
    -- Thêm các trường config khác nếu cần
    created_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP
);

-- Dữ liệu Metadata Ảnh đã đồng bộ từ Drive
CREATE TABLE IF NOT EXISTS image_metadata (
    file_id VARCHAR(100) PRIMARY KEY,
    folder_id VARCHAR(100) NOT NULL,
    file_name VARCHAR(255) NOT NULL,
    last_modified_time TIMESTAMP WITH TIME ZONE,
    file_size BIGINT,
    -- ... các trường metadata khác
    synced_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP
);

-- Dữ liệu Log Bài đăng (Để tính Stats)
CREATE TABLE IF NOT EXISTS post_logs (
    id SERIAL PRIMARY KEY,
    post_id VARCHAR(50) NOT NULL,
    page_id VARCHAR(50) NOT NULL REFERENCES pages(page_id),
    file_id VARCHAR(100) REFERENCES image_metadata(file_id),
    post_url VARCHAR(255),
    status VARCHAR(20) DEFAULT 'success',
    posted_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP
);